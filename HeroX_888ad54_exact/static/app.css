:root{
    --bg: #ffffff;
    --surface: #f8fafc;
    --muted: #6b7280;
    --accent: #0ea5a4;
    --good: #16a34a;
    --bad: #ef4444;
    --panel-pad: 14px;
    --glow: 0 6px 18px rgba(14,165,164,0.12);
    --border-radius: 12px;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
html,body{height:100%;margin:0;background:var(--bg);color:#111827}
.app {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto 1fr auto auto;
    gap:18px;
    padding:20px;
    max-width:1280px;
    margin:20px auto;
    box-sizing: border-box;
    height: calc(100vh - 40px);
}

/* --- MINI PANEL STYLES --- */
#miniPanel {
    position: fixed;
    right: 18px;
    bottom: 18px;
    z-index: 2147483645;
    width: 220px;
    cursor: pointer;
}
.mini-card {
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    padding:12px;
    border-radius:12px;
    background: linear-gradient(180deg,#fff,#f3fbfb);
    box-shadow: 0 12px 40px rgba(2,6,23,0.08);
    border: 1px solid rgba(2,6,23,0.04);
}
.mini-card-inner { display:flex; flex-direction:column; gap:6px; }
.mini-title { font-weight:700; font-size:14px; color:#0f172a; }
.mini-sub { font-size:12px; color:var(--muted); }
.mini-stats { display:flex; gap:6px; margin-top:4px; }
.mini-pill {
    font-size:12px;
    padding:4px 8px;
    background: #fff;
    border-radius: 999px;
    border:1px solid rgba(2,6,23,0.04);
    box-shadow: 0 6px 14px rgba(2,6,23,0.03);
}
.mini-chev { font-size:22px; transform: rotate(90deg); color: var(--muted); }

/* When app is visible, ensure miniPanel can be hidden cleanly by JS */
/* --- END MINI PANEL STYLES --- */

header {
    grid-column: 1 / -1;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
}
header h1 { margin:0; font-size:20px; font-weight:700; color:#0f172a; }
.controls { display:flex; gap:10px; align-items:center; }

.btn {
    padding:10px 14px;
    border-radius:10px;
    border:1px solid rgba(6,6,7,0.06);
    background:white;
    cursor:pointer;
    font-weight:600;
    box-shadow: var(--glow);
    transition: all .15s ease;
    outline: none;
}
.btn:hover { transform: translateY(-2px); }
.btn:disabled { opacity:0.55; cursor:not-allowed; transform:none; box-shadow:none; }
.btn-glow { border: 1px solid rgba(6,182,212,0.18); box-shadow: 0 8px 30px rgba(6,182,212,0.12); }
.btn-danger { background: #fff5f5; border-color: rgba(239,68,68,0.12); box-shadow:none; }
.btn-success { background: #f0fdfa; border-color: rgba(16,185,129,0.08); }

.panel {
    background: linear-gradient(180deg, #ffffff, var(--surface));
    border-radius: var(--border-radius);
    padding: var(--panel-pad);
    box-shadow: 0 6px 18px rgba(15,23,42,0.04);
    border: 1px solid rgba(2,6,23,0.04);
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    height: 100%;
}
.panel-header { display:flex; justify-content:space-between; align-items:center; gap:8px; margin-bottom:10px; flex: 0 0 auto; }
.panel-header h3 { margin:0; font-size:14px; color:#0f172a; }
.panel-body { flex: 1 1 auto; min-height: 0; overflow: hidden; display:flex; flex-direction: column; } /* important: min-height:0 for flex overflow */

/* NEW: account controls styling */
.account-controls { gap:8px; }
.account-block input[type="password"] {
    padding:8px;
    border-radius:8px;
    border:1px solid rgba(2,6,23,0.06);
    width:220px;
    outline: none;
    box-sizing: border-box;
    font-family: inherit;
    font-size:13px;
}
.account-block .muted { font-size:12px; color:var(--muted); }

/* funds toggle wrapper */
.funds-toggle-wrapper { display:flex; align-items:center; gap:10px; }

/* Toggle */
.toggle {
    display:inline-flex;
    align-items:center;
    gap:8px;
    cursor: pointer;
    user-select: none;
}
.toggle.disabled { opacity: 0.5; cursor: not-allowed; }
.toggle-track {
    width:64px;
    height:30px;
    border-radius:999px;
    background: linear-gradient(180deg,#f1f5f9,#f8fafc);
    border:1px solid rgba(2,6,23,0.06);
    padding:4px;
    box-sizing:border-box;
    position:relative;
    transition: background .12s ease, border-color .12s ease;
}
.toggle-knob {
    width:22px;
    height:22px;
    border-radius:50%;
    background:white;
    box-shadow: 0 6px 14px rgba(2,6,23,0.08);
    position:absolute;
    left:4px;
    top:4px;
    transition: left .18s cubic-bezier(.2,.9,.2,1), transform .12s ease;
}
/* toggled to 'real' : add 'on' class in JS to move knob right and highlight */
.toggle.on .toggle-track { background: linear-gradient(90deg, rgba(14,165,164,0.12), rgba(6,182,212,0.06)); border-color: rgba(14,165,164,0.18); }
.toggle.on .toggle-knob { left:calc(100% - 26px); }

.toggle-labels {
    display:flex;
    gap:6px;
    font-size:12px;
    color:var(--muted);
    align-items:center;
}
.toggle-left, .toggle-right { min-width:36px; text-align:center; }
.toggle.on .toggle-right { font-weight:700; color: #0f172a; }
.toggle:not(.on) .toggle-left { font-weight:700; color: #0f172a; }

/* tick column */
.col-tick { grid-column: 1 / 2; display:flex; flex-direction:column; gap:12px; }
.col-analysis { grid-column: 2 / 3; display:flex; flex-direction:column; gap:12px; }

/* summary spans both */
.col-summary { grid-column: 1 / -1; display:flex; flex-direction:column; gap:12px; }

/* small panels row under summary */
.small-row { grid-column: 1 / -1; display:grid; grid-template-columns: 1fr 1fr; gap:18px; }

/* tick preview row (fixed area) */
.tick-scroll {
    padding:8px 0 8px 0;
    flex: 0 0 auto;
}
.tick-grid {
    display:flex;
    gap:8px;
    align-items:center;
    flex-wrap:nowrap;
    overflow-x:auto;
    padding:8px;
    max-height:140px;
    align-content:flex-start;
}
.tick-cell {
    min-width:44px;
    height:44px;
    border-radius:8px;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#fff;
    font-weight:700;
    box-shadow: 0 6px 16px rgba(2,6,23,0.04);
    border:1px solid rgba(2,6,23,0.03);
    font-size:18px;
    flex: 0 0 44px;
    transition: background .18s ease, border-color .18s ease, transform .12s ease;
}
.tick-cell.win { background: linear-gradient(180deg, rgba(16,185,129,0.08), rgba(255,255,255,0.95)); border-color: rgba(16,185,129,0.18); transform: translateY(-3px); }
.tick-cell.loss { background: linear-gradient(180deg, rgba(239,68,68,0.08), rgba(255,255,255,0.95)); border-color: rgba(239,68,68,0.18); transform: translateY(-3px); }

.tick-meta { font-size:13px; color:var(--muted); margin-top:8px; flex: 0 0 auto; display:flex; gap:8px; align-items:center; }

/* tick list fills remaining panel body and scrolls */
.tick-list {
    margin-top:8px;
    border-radius:8px;
    border:1px solid rgba(2,6,23,0.04);
    background: #fff;
    overflow-y:auto;
    overflow-x:auto;
    font-size:13px;
    padding:6px;
    flex: 1 1 auto;
    transition: max-height .18s ease;
    min-height:0;
}
.tick-row {
    display:flex;
    gap:12px;
    align-items:center;
    padding:8px 6px;
    border-bottom:1px solid rgba(2,6,23,0.03);
    min-height:40px;
    white-space:nowrap;
    transition: background .18s ease, transform .12s ease;
}
.tick-row.win { background: linear-gradient(90deg, rgba(16,185,129,0.04), transparent); transform: translateY(-2px); }
.tick-row.loss { background: linear-gradient(90deg, rgba(239,68,68,0.04), transparent); transform: translateY(-2px); }
.tick-row:last-child { border-bottom:none; }
.tick-time { color:var(--muted); width:110px; font-size:12px; flex:0 0 110px; }
.tick-symbol { font-weight:700; width:100px; flex:0 0 100px; }
.tick-digit { width:34px; height:34px; display:flex; align-items:center; justify-content:center; border-radius:6px; background:#f7f7f7; font-weight:800; }

.digits-grid { display:grid; grid-template-columns: repeat(5, 1fr); gap:8px; margin-bottom:12px; }
.digit-cell { padding:10px; border-radius:8px; background:#fff; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:18px; border:1px solid rgba(2,6,23,0.04); position:relative; height:100%; flex-direction:column; }
.digit-cell.current { outline: 3px solid rgba(14,165,164,0.12); box-shadow: 0 8px 24px rgba(6,182,212,0.06); transform:translateY(-2px); }
.digit-cursor { position:absolute; bottom:-12px; left:50%; transform:translateX(-50%); width:0;height:0; border-left:8px solid transparent; border-right:8px solid transparent; border-top:10px solid var(--accent); border-radius:2px; }

.digit-primary { font-size:20px; line-height:1; }
.digit-confidence { font-size:12px; color:var(--muted); margin-top:6px; }

.buffer-list { display:flex; gap:6px; padding:8px; flex-wrap:wrap; background:linear-gradient(180deg, #fff, #fafafa); border-radius:8px; border:1px dashed rgba(2,6,23,0.04); max-height:140px; overflow:auto; }
.buffer-item { width:34px; height:34px; display:flex; align-items:center; justify-content:center; border-radius:6px; background:white; font-weight:700; box-shadow: 0 6px 16px rgba(2,6,23,0.03); font-size:14px; }

.summary-wrapper { max-height:360px; overflow:auto; }
.summary-table { width:100%; border-collapse:collapse; font-size:13px; margin-top:6px;}
.summary-table th, .summary-table td { padding:8px 6px; text-align:left; border-bottom:1px solid rgba(2,6,23,0.04); }
.summary-win { color: var(--good); font-weight:700; }
.summary-loss { color: var(--bad); font-weight:700; }

.raw-debug {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
    font-size:12px;
    background:#0f172a;
    color:#fff;
    padding:10px;
    border-radius:8px;
    height:200px;
    min-height:200px;
    max-height:200px;
    overflow-x:auto;
    overflow-y:auto;
    white-space:pre;
    width:100%;
    max-width:520px;
    box-sizing:border-box;
    tab-size:4;
    word-break: normal;
    overflow-wrap: normal;
}

.row { display:flex; gap:10px; align-items:center; }
.col { display:flex; flex-direction:column; gap:8px; }
.status-pill { padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px; background:rgba(2,6,23,0.04); color:var(--muted); }
.count-bubble { background:var(--accent); color:white; padding:6px 10px; border-radius:999px; font-weight:800; }

.overlay {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1200;
    backdrop-filter: blur(6px) saturate(120%);
    background: rgba(10, 15, 20, 0.45);
}
.overlay.visible { display:flex; }
.overlay .modal {
    width: min(1100px, 92%);
    max-height: 78vh;
    background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(248,250,252,0.95));
    border-radius: 14px;
    box-shadow: 0 30px 80px rgba(2,6,23,0.35);
    padding: 16px;
    overflow: hidden;
    display:flex;
    flex-direction: column;
    border: 1px solid rgba(2,6,23,0.06);
}
.overlay .modal-header {
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    margin-bottom:8px;
}
.overlay .modal-body {
    overflow:auto;
    flex:1 1 auto;
    min-height:0;
    padding-right:6px;
}
.overlay .close {
    background:transparent;
    border:1px solid rgba(2,6,23,0.06);
    padding:6px 10px;
    border-radius:8px;
    cursor:pointer;
}

@media (max-width:980px){
    .app { grid-template-columns: 1fr; grid-template-rows: auto auto auto auto; padding:12px; height: auto; }
    .small-row { grid-template-columns: 1fr; }
    .account-controls { width:100%; }
    .account-block input[type="password"] { width:100%; }
}

/* --- NEW: AutoTrade Panel Styles --- */
#autotrade-container {
    background: linear-gradient(180deg, #ffffff, var(--surface));
    border-radius: var(--border-radius);
    padding: var(--panel-pad);
    box-shadow: 0 6px 18px rgba(15,23,42,0.06);
    border: 1px solid rgba(2,6,23,0.04);
    font-family: inherit;
    color: #111827;
    max-width: 320px;
}
#autotrade-container h3 {
    margin-top:0;
    margin-bottom:10px;
    font-size:16px;
    color: var(--accent);
}
#autotrade-container p {
    font-size:14px;
    margin-bottom:12px;
}
#autotrade-container label {
    display:flex;
    align-items:center;
    gap:8px;
    font-size:14px;
    cursor:pointer;
}
#autotrade-checkbox {
    width:16px;
    height:16px;
}

/* --- Toasts (HeroX) --- */
#toastContainer {
  position: fixed;
  right: 18px;
  top: 18px;
  z-index: 99999;
  display: flex;
  flex-direction: column;
  gap: 10px;
  pointer-events: none;
}
.toast {
  pointer-events: auto;
  min-width: 220px;
  max-width: 420px;
  padding: 10px 14px;
  border-radius: 10px;
  box-shadow: 0 10px 30px rgba(2,6,23,0.18);
  color: #fff;
  background: #111827;
  opacity: 0;
  transform: translateY(-6px);
  transition: opacity .18s ease, transform .18s ease;
  font-size: 13px;
}
.toast.show { opacity: 1; transform: translateY(0); }
.toast .title { font-weight: 700; margin-bottom: 4px; font-size: 13px; }
.toast.info { background: #0f172a; }
.toast.success { background: #16a34a; }
.toast.warn { background: #f59e0b; color: #111827; }